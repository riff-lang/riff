#!/usr/bin/env riff

// Brainfuck interpreter

op['>'] = "i++"
op['<'] = "i--"
op['+'] = "m[i]++"
op['-'] = "m[i]--"
op['.'] = "putc(m[i])"
op[','] = "m[i]=getc()"
op['['] = "while m[i]{"
op[']'] = "}"

file = arg[1] ? open(arg[1]) : stdin
while !eof(file)
    prog #= op[getc(file)]
close(file)
i = 0
eval(prog)
